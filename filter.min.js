var filterObj=function(){var e,f=[],l,m=30,i=[],d,o=function(a){for(var b=n("div","alert"),c=b.length,d=f.length,j=!1,g="",h=0;h<c;h++){for(var j=!1,g=b[h],e=0;e<d;e++)if(f[e]==g){j=!0;break}j||f.push(b[h])}a&&a()},r=function(){var a=document.createElement("span"),b=document.createElement("img");b.src=chrome.extension.getURL("assets/close.png");a.className="closeBtn";b.addEventListener("click",function(){document.getElementById("filterDiv").style.display="none"});a.appendChild(b);e.appendChild(a)},
k=function(a,b,c,d,e,g){var a=document.createElement(a),h;a.id=b||"";a.name=c||"";a.value=d||"";a.className=g||"";for(h in e)e.hasOwnProperty(h)&&(a[h]=e[h]);return a},s=function(a){a.addEventListener("change",function(){var b=f.length,c;if(a.checked===!0)for(c=0;c<b;c++){if(RegExp("(^| )"+a.value+"( |$)").test(f[c].className))f[c].style.display="none",--m}else for(c=0;c<b;c++)if(RegExp("(^| )"+a.value+"( |$)").test(f[c].className))f[c].style.display="inherit",++m;b=a.value;c=a.checked;for(e in d)if(d[e].id===
b){d[e].checked=c;break}localStorage.filters=JSON.stringify(d)})},p=function(){l=n("div","ajax_paginate")[0].firstChild;t()},t=function(){l.addEventListener("click",function(){var a=0,b=window.setInterval(function(){a++;o(q);a===20&&(p(),window.clearInterval(b))},200)})},q=function(){len=i.length;for(var a=0;a<len;a++)if(i[a].checked===!0){var b=document.createEvent("HTMLEvents");b.initEvent("change",!1,!0);i[a].dispatchEvent(b)}},n=function(a,b){for(var c=a?document.getElementsByTagName(a):document.all,
d=[],e=RegExp("(^| )"+b+"( |$)"),g=0;g<c.length;g++)e.test(c[g].className)&&d.push(c[g]);return d},u=function(){var a=!1,b=new XMLHttpRequest;b.onreadystatechange=function(){b.readyState==4&&(a=JSON.parse(b.responseText))};b.open("GET",chrome.extension.getURL("/manifest.json"),!1);try{b.send()}catch(c){}return a}();return{Init:function(){var a=localStorage.githubNewsFilterVersion,b=u.version;if(!a||a!==b)localStorage.removeItem("filters"),localStorage.githubNewsFilterVersion=b;localStorage.filters?
d=JSON.parse(localStorage.filters):(d={issueComment:{text:"Issue Comment",id:"issues_comment",checked:!1},pullRequest:{text:"Pull Request & Issue Opened",id:"issues_opened",checked:!1},follow:{text:"Follow",id:"follow",checked:!1},gist:{text:"Gist",id:"gist",checked:!1},push:{text:"Push",id:"push",checked:!1},created:{text:"Created Branch",id:"create",checked:!1},issueClosed:{text:"Close & Merge",id:"issues_closed",checked:!1},fork:{text:"Forked",id:"fork",checked:!1},watch:{text:"Watch",id:"watch_started",
checked:!1},editWiki:{text:"Wiki",id:"gollum",checked:!1}},localStorage.filters=JSON.stringify(d));a=document.createElement("div");a.id="filterDiv";a.className="filterBar";document.getElementById("footer").appendChild(a);e=a;r();o();for(var c in d){a=k("input",c,c,d[c].id,{type:"checkbox"});s(a);if(d[c].checked)a.checked=!0;b=k("label");b.innerHTML=d[c].text;var f=k("span");f.className="filterOption";f.appendChild(b);f.appendChild(a);i.push(a);e.appendChild(f)}p();q()}}}();filterObj.Init();
